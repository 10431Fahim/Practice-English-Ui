<section class="book-confirm-order" #order>
  <div class="container">
    <div class="book-confirm-order-child">
      <div
        class="book-confirm-order-title wow animate__fadeInRight animate__delay-1s"
      >
        <h1>অর্ডার করতে নিচের ফর্মটি সম্পূর্ণ পূরন করুন</h1>
      </div>

      <div
        class="book-confirm-products wow animate__fadeInUp animate__delay-1s"
      >
        <div class="book-confirm-products-title">
          <h1>Your Products</h1>
        </div>
        <!-- END! book-confirm-products-title -->

        <div class="book-confirm-products-cards">
          <div class="book-confirm-products-card">
            <div class="book-confirm-products-card-image">
              <img
                src="/assets/images/temp/png/book.webp"
                alt="products-card-image"
              />
            </div>

            <div class="book-confirm-products-card-desctiprion">
              <h1>Practice English1 X 1</h1>

              <div class="add-to-cart-price">
                <div class="add-to-cart">
                  <button type="button" (click)="onDecrementQtySimple($event)">-</button>
                  <input type="text" value="1" [ngModel]="selectedQty" readonly />
                  <button type="button" (click)="onIncrementQtySimple($event)">+</button>
                </div>

                <div class="price">
                  <p>৳ 500.00</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- END! book-confirm-products-cards -->
      </div>

      <div
        class="book-confirm-order-main wow animate__fadeInUp animate__delay-1s"
      >
        <div class="book-confirm-order-main-left">
          <div class="book-confirm-products-title">
            <h1>Billing details</h1>
          </div>

          <div class="book-confirm-order-main-left-form">
            <form [formGroup]="formData" >
              <div class="input-box">
                <p>
                  <label>আপনার নাম লিখুন <span>*</span></label>
                </p>
                <input  [readonly]="sentOtp" formControlName="name" type="text" placeholder="" [ngClass]="{'error': name.invalid && (name.dirty || name.touched)}"/>
                <div *ngIf="name.invalid && (name.dirty || name.touched)" class="error-message">
                  Name is required.
                </div>
              </div>

              <div class="input-box">
                <p>
                  <label>আপনার গ্রাম, থানা এবং জেলার নাম লিখুন। <span>*</span></label>
                </p>
                <input  [readonly]="sentOtp" formControlName="address" type="text" placeholder="" [ngClass]="{'error': address.invalid && (address.dirty || address.touched)}"/>
                <div *ngIf="address.invalid && (address.dirty || address.touched)" class="error-message">
                  Address is required.
                </div>
              </div>

              <div class="input-box">
                <p>
                  <label>Phone <span>*</span></label>
                </p>

                <div class="input-box-phone">
                  <div class="input-box-phone-country">
                    <img src="./assets/images/brand/png/bd.webp" alt="bd" />
                    <h4>+88</h4>
                  </div>

                  <input  [readonly]="sentOtp" type="text" formControlName="phoneNo" digitOnly placeholder="" maxlength="11" [ngClass]="{'error': phoneNo.invalid && (phoneNo.dirty || phoneNo.touched)}"/>
                </div>
                <div *ngIf="phoneNo.invalid && (phoneNo.dirty || phoneNo.touched)" class="error-message">
                  Phone number is required.
                </div>
              </div>
            </form>
          </div>
        </div>
        <!-- END! book-confirm-order-main-left -->

        <div class="book-confirm-order-main-right">
          <div class="book-confirm-products-title">
            <h1>Your order</h1>
          </div>

          <div class="book-confirm-order-main-right-bottom">
            <div class="book-confirm-order-main-right-bottom-top">
              <h3>Product</h3>
              <h3>Subtotal</h3>
            </div>
            <!-- END! book-confirm-order-main-right-bottom-top -->

            <div class="book-confirm-order-main-right-bottom-order-product">
              <div
                class="book-confirm-order-main-right-bottom-order-product-left"
              >
                <img
                  src="./assets/images/brand/png/book-banner.jpg"
                  alt="book-banner"
                />

                <p>
                  <span>Practice English</span>
                  <span>x {{selectedQty}}</span>
                </p>
              </div>

              <div
                class="book-confirm-order-main-right-bottom-order-product-right"
              >
                <p>
                  <span>৳ 500.00</span>
                </p>
              </div>
            </div>
            <!-- END! book-confirm-order-main-right-bottom-order-product -->

            <div class="book-confirm-order-main-right-bottom-order-product">
              <div
                class="book-confirm-order-main-right-bottom-order-product-left"
              >
                <p>
                  <span>Subtotal</span>
                </p>
              </div>

              <div
                class="book-confirm-order-main-right-bottom-order-product-right"
              >
                <p>
                  <span>৳ {{(500 * selectedQty)}}</span>
                </p>
              </div>
            </div>
            <!-- END! book-confirm-order-main-right-bottom-order-product -->

            <div class="book-confirm-order-main-right-bottom-order-product">
              <div
                class="book-confirm-order-main-right-bottom-order-product-left"
              >
                <p>
                  <span>Shipping</span>
                </p>
              </div>

              <div
                class="book-confirm-order-main-right-bottom-order-product-right"
              >
                <p>
                  <span>৳ 90.00</span>
                </p>
              </div>
            </div>
            <!-- END! book-confirm-order-main-right-bottom-order-product -->

            <div class="book-confirm-order-main-right-bottom-bottom">
              <h3>Total</h3>
              <h3>৳ {{(500 * selectedQty) + 90}}</h3>
            </div>
            <!-- END! book-confirm-order-main-right-bottom-top -->

           <div class="payment">
             <div class="cash-on-delivery active"  *ngFor="let data of paymentMethods" [class.active]="data?.paymentType === selectedPaymentMethod" (click)="onSelectPaymentMethod(data)">
               <h3>{{data?.name}}</h3>

               <p>{{data?.title}}</p>
             </div>
           </div>

            <!--            <div class="online-payment">-->
            <!--              <div class="method-info active" *ngFor="let data of paymentMethods"-->
            <!--                   [class.active]="data?.paymentType === selectedPaymentMethod" (click)="onSelectPaymentMethod(data)">-->
            <!--                <img [src]="data?.image" alt="">-->
            <!--                <span>{{ data?.paymentMethodName }}</span>-->
            <!--              </div>-->
            <!--            </div>-->

            <div class="input-box" *ngIf="isOtpSent" style="margin-top: 10px">
              <p>
                <label>আপনার মোবাইল এ পাঠানো কোড টি লিখুন। {{'0:' + countDown}}<span>*</span></label>
              </p>
              <input matInput placeholder="কোডটি লিখুন" [(ngModel)]="otp" />
              <button style="background: none; color: #0c3e9d;border: none;" *ngIf="countDown == 0 && isCountDownEnd" type="button" (click)="onConfirm()">আবার পাঠান</button>
            </div>


            <div class="order-now" *ngIf="!sentOtp">
              <button type="button" (click)="onConfirm()">
                <small><i class="fa-solid fa-lock"></i></small>
                <span>অর্ডার করুন ৳ {{(500 * selectedQty) + 90}}</span>
              </button>
            </div>

            <div class="order-now" *ngIf="sentOtp && !isLoading">
              <button type="button" (click)="onSubmit()">
                <small><i class="fa-solid fa-lock"></i></small>
                <span>অর্ডার করুন ৳ {{(500 * selectedQty) + 90}}</span>
              </button>
            </div>
            <div class="order-now" *ngIf="isLoading">
              <button type="button">
                <span class="loader"></span>
                <span>অপেক্ষা করুন</span>
              </button>
            </div>
          </div>
        </div>
        <!-- END! book-confirm-order-main-right -->
      </div>
    </div>
    <!-- END! book-confirm-order-child -->
  </div>
</section>
<!-- END! book-confirm-order -->
<app-confirm-order #confirm></app-confirm-order>
